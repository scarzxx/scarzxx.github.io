<!DOCTYPE html>
<html lang="cs">
<head>
  <title>Kalkulačka ředění</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Konfigurace Tailwind CSS
    tailwind.config = {
      darkMode: 'class', // Aktivace dark mode pomocí class
    };
  </script>
  <style>
    .toggle-checkbox:checked {
      @apply: right-0 border-green-400;
      right: 0;
      border-color: #68d391;
    }
    .toggle-checkbox:checked + .toggle-label {
      @apply: bg-green-400;
      background-color: #68d391;
    }
  </style>
</head>
<body class="bg-white dark:bg-gray-900 p-6">
  <!-- Přepínač tmavého režimu -->
  <div class="flex justify-end mb-6">
    <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
        <input type="checkbox" name="toggle" id="toggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
        <label for="toggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
    </div>
    <label for="toggle" class="text-gray-700 dark:text-gray-200">Tmavý režim</label>
  </div>

  <h2 class="text-2xl font-bold mb-4 text-gray-900 dark:text-gray-100">Kalkulačka ředění</h2>

  <div class="mb-4">
    <label for="totalVolume" class="block mb-2 text-gray-700 dark:text-gray-200">Celkové množství roztoku (ml):</label>
    <input type="number" id="totalVolume" value="1000" class="w-full px-3 py-2 border rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400">
  </div>

  <div class="mb-4">
    <label for="ratio" class="block mb-2 text-gray-700 dark:text-gray-200">Poměr ředění (1:X):</label>
    <input type="number" id="ratio" value="15" class="w-full px-3 py-2 border rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400">
  </div>

  <button onclick="calculate()" class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">Vypočítat</button>

  <div class="mt-4">
    <p class="text-gray-700 dark:text-gray-200">Potřebné množství přípravku: <span id="concentrate"></span> ml</p>
    <p class="text-gray-700 dark:text-gray-200">Potřebné množství vody: <span id="water"></span> ml</p>
  </div>

  <div class="mt-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="bg-gray-200 dark:bg-gray-700">
          <th class="px-4 py-2 text-left text-gray-700 dark:text-gray-200">Poměr</th>
          <th class="px-4 py-2 text-left text-gray-700 dark:text-gray-200">Přípravek (ml)</th>
          <th class="px-4 py-2 text-left text-gray-700 dark:text-gray-200">Voda (ml)</th>
        </tr>
      </thead>
      <tbody id="dilutionTable">
      </tbody>
    </table>
  </div>

  <script>
    // Funkce pro přepínání tmavého režimu
    const toggle = document.getElementById('toggle');

    // Kontrola preference v localStorage
    if (localStorage.getItem('darkMode') === 'enabled') {
      document.documentElement.classList.add('dark');
      toggle.checked = true;
    }

    toggle.addEventListener('change', function() {
      if (this.checked) {
        document.documentElement.classList.add('dark');
        localStorage.setItem('darkMode', 'enabled');
      } else {
        document.documentElement.classList.remove('dark');
        localStorage.setItem('darkMode', null);
      }
    });

    function calculate() {
      const totalVolume = parseFloat(document.getElementById('totalVolume').value);
      const ratio = parseFloat(document.getElementById('ratio').value);

      const concentrate = totalVolume / (1 + ratio);
      const water = totalVolume - concentrate;

      document.getElementById('concentrate').textContent = concentrate.toFixed(2);
      document.getElementById('water').textContent = water.toFixed(2);

      const tableBody = document.getElementById('dilutionTable');
      tableBody.innerHTML = '';

      for (let i = 1; i <= ratio; i++) {
        const currentConcentrate = totalVolume / (1 + i);
        const currentWater = totalVolume - currentConcentrate;

        const row = document.createElement('tr');
        row.classList.add('border-b', 'border-gray-200', 'dark:border-gray-600', 'hover:bg-gray-100', 'dark:hover:bg-gray-800');

        const ratioCell = document.createElement('td');
        ratioCell.classList.add('px-4', 'py-2', 'text-gray-700', 'dark:text-gray-200');
        ratioCell.textContent = `1:${i}`;
        row.appendChild(ratioCell);

        const concentrateCell = document.createElement('td');
        concentrateCell.classList.add('px-4', 'py-2', 'text-gray-700', 'dark:text-gray-200');
        concentrateCell.textContent = currentConcentrate.toFixed(2);
        row.appendChild(concentrateCell);

        const waterCell = document.createElement('td');
        waterCell.classList.add('px-4', 'py-2', 'text-gray-700', 'dark:text-gray-200');
        waterCell.textContent = currentWater.toFixed(2);
        row.appendChild(waterCell);

        tableBody.appendChild(row);
      }
    }
  </script>
</body>
</html>